(()=>{var e={21:(e,r,t)=>{"use strict";t.r(r),t.d(r,{NIL:()=>S,parse:()=>w,stringify:()=>l,v1:()=>b,v3:()=>m,v4:()=>v,v5:()=>x,validate:()=>d,version:()=>P});const o=require("crypto");var s=t.n(o);const n=new Uint8Array(256);let a=n.length;function c(){return a>n.length-16&&(s().randomFillSync(n),a=0),n.slice(a,a+=16)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&i.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const l=function(e,r=0){const t=(u[e[r+0]]+u[e[r+1]]+u[e[r+2]]+u[e[r+3]]+"-"+u[e[r+4]]+u[e[r+5]]+"-"+u[e[r+6]]+u[e[r+7]]+"-"+u[e[r+8]]+u[e[r+9]]+"-"+u[e[r+10]]+u[e[r+11]]+u[e[r+12]]+u[e[r+13]]+u[e[r+14]]+u[e[r+15]]).toLowerCase();if(!d(t))throw TypeError("Stringified UUID is invalid");return t};let f,h,y=0,p=0;const b=function(e,r,t){let o=r&&t||0;const s=r||new Array(16);let n=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:h;if(null==n||null==a){const r=e.random||(e.rng||c)();null==n&&(n=f=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==a&&(a=h=16383&(r[6]<<8|r[7]))}let i=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:p+1;const u=i-y+(d-p)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||i>y)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=i,p=d,h=a,i+=122192928e5;const b=(1e4*(268435455&i)+d)%4294967296;s[o++]=b>>>24&255,s[o++]=b>>>16&255,s[o++]=b>>>8&255,s[o++]=255&b;const w=i/4294967296*1e4&268435455;s[o++]=w>>>8&255,s[o++]=255&w,s[o++]=w>>>24&15|16,s[o++]=w>>>16&255,s[o++]=a>>>8|128,s[o++]=255&a;for(let e=0;e<6;++e)s[o+e]=n[e];return r||l(s)},w=function(e){if(!d(e))throw TypeError("Invalid UUID");let r;const t=new Uint8Array(16);return t[0]=(r=parseInt(e.slice(0,8),16))>>>24,t[1]=r>>>16&255,t[2]=r>>>8&255,t[3]=255&r,t[4]=(r=parseInt(e.slice(9,13),16))>>>8,t[5]=255&r,t[6]=(r=parseInt(e.slice(14,18),16))>>>8,t[7]=255&r,t[8]=(r=parseInt(e.slice(19,23),16))>>>8,t[9]=255&r,t[10]=(r=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=r/4294967296&255,t[12]=r>>>24&255,t[13]=r>>>16&255,t[14]=r>>>8&255,t[15]=255&r,t};function g(e,r,t){function o(e,o,s,n){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const r=[];for(let t=0;t<e.length;++t)r.push(e.charCodeAt(t));return r}(e)),"string"==typeof o&&(o=w(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(o),a.set(e,o.length),a=t(a),a[6]=15&a[6]|r,a[8]=63&a[8]|128,s){n=n||0;for(let e=0;e<16;++e)s[n+e]=a[e];return s}return l(a)}try{o.name=e}catch(e){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}const m=g("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),s().createHash("md5").update(e).digest()})),v=function(e,r,t){const o=(e=e||{}).random||(e.rng||c)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=o[e];return r}return l(o)},x=g("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),s().createHash("sha1").update(e).digest()})),S="00000000-0000-0000-0000-000000000000",P=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},268:(e,r,t)=>{const o=t(933),{database:s}=t(346),n=t(74),a=t(414);e.exports=async({res:e,id:r})=>{try{n(r)?s.hasOwnProperty(r)?o(r)&&a({res:e,code:204}):a({res:e,code:404,message:`Sorry but no user with ${r} exist \n`}):a({res:e,code:400,message:`Sorry but id: ${r} doesnt match uuid format \n`})}catch(e){throw e}}},477:(e,r,t)=>{const{database:o}=t(346),s=t(521),n=t(74),a=t(414);e.exports=async({res:e,id:r})=>{try{if(n(r))if(o.hasOwnProperty(r)){const t=s(r);a({res:e,code:200,body:t})}else a({res:e,code:404,message:`Sorry but no user with ${r} exist \n`});else a({res:e,code:400,message:`Sorry but id: ${r} doesnt match uuid format \n`})}catch(e){throw e}}},430:(e,r,t)=>{const o=t(179),s=t(414);e.exports=async e=>{try{const r=o();s({res:e,code:200,body:r})}catch(e){throw e}}},798:(e,r,t)=>{const o=t(391),s=t(550),n=t(414);e.exports=async(e,r)=>{try{await s(e);const t=e.body;if(t.hasOwnProperty("name")&&t.hasOwnProperty("age")&&t.hasOwnProperty("hobbies")){const e=o({data:t});n({res:r,code:201,body:e})}else n({res:r,code:400,message:`You didn't provide one of required fields, please check name: ${t.name} age: ${t.age} hobbies: ${t.hobbies}\n`})}catch(e){throw e}}},702:(e,r,t)=>{const o=t(833),{database:s}=t(346),n=t(74),a=t(414),c=t(550);e.exports=async({res:e,req:r,id:t})=>{try{if(await c(r),n(t))if(s.hasOwnProperty(t)){const s=o({id:t,body:r.body});a({res:e,code:200,body:s})}else a({res:e,code:404,message:`Sorry but no user with ${t} exist \n`});else a({res:e,code:400,message:`Sorry but id: ${t} doesnt match uuid format \n`})}catch(e){throw e}}},502:(e,r)=>{r.Person=class{constructor({id:e,name:r,age:t,hobbies:o}){this.id=e,this.name=r,this.age=t,this.hobbies=o}}},346:(e,r)=>{r.database={}},391:(e,r,t)=>{const{v4:o}=t(21),{database:s}=t(346),{Person:n}=t(502);e.exports=({data:e})=>{try{const r=o();return s[r]=new n({...e,id:r}),s[r]}catch(e){throw e}}},933:(e,r,t)=>{const{database:o}=t(346);e.exports=e=>{try{return delete o[e]}catch(e){throw e}}},521:(e,r,t)=>{const{database:o}=t(346);e.exports=e=>{try{return o[e]}catch(e){throw e}}},179:(e,r,t)=>{const{database:o}=t(346);e.exports=()=>{try{return o}catch(e){throw e}}},833:(e,r,t)=>{const{database:o}=t(346);e.exports=({id:e,body:r})=>{try{return o[e]={...o[e],...r},o[e]}catch(e){throw e}}},550:e=>{e.exports=e=>{try{return new Promise(((r,t)=>{let o="";e.on("error",(e=>{console.error("error happened while body parsing",e),t()})),e.on("data",(e=>{o+=e})),e.on("end",(()=>{e.body=JSON.parse(o),r()}))}))}catch(e){throw e}}},74:e=>{e.exports=e=>Boolean(e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i))},414:e=>{e.exports=({res:e,code:r,body:t="",message:o=""})=>{try{Boolean(t)?(e.writeHead(r,{"Content-Type":"application/json"}),e.write(JSON.stringify(t))):e.statusCode=r,Boolean(o)&&e.write(o),e.end()}catch(e){throw e}}},685:e=>{"use strict";e.exports=require("http")}},r={};function t(o){var s=r[o];if(void 0!==s)return s.exports;var n=r[o]={exports:{}};return e[o](n,n.exports,t),n.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=t(685),r=t(798),o=t(430),s=t(477),n=t(268),a=t(702),c=t(414),i=process.env.PORT||5e3;e.createServer((async(e,t)=>{try{const{method:i,url:d}=e,u=d.split("/").slice(1),[l,f]=u;if("person"!==l||u.length>=3)console.log(`received ${i}-request on ${d}`),c({res:t,code:404,message:"Sorry but no other routes than person exist\n"});else switch(i){case"POST":await r(e,t);break;case"GET":f?await s({res:t,id:f}):await o(t);break;case"DELETE":await n({res:t,id:f});break;case"PUT":await a({res:t,req:e,id:f})}}catch(e){console.log(e),c({res:t,code:500,message:"Sorry, internal server error has occured"})}})).listen(i,"localhost",(()=>{console.log(`Server is running on port ${i}`)}))})()})();